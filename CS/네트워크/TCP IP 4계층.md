# TCP IP 4계층

```table-of-contents
```

##  TCP IP 4계층

- 장치들이 인터넷 상에서 데이터를 주고받을 때 쓰는 독립적인 프로토콜의 집합
- 인터넷을 통해 데이터를 보낼 때 주로 TCP와 IP를 이용해서 보내기 때문에 이렇게 불림


### 어플리케이션 계층(application)

- [HTTP](../Web/HTTP.md), SMTP, SSH, FTP가 대표적
- 웹서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층


### 전송 계층(transport)

- TCP, UDP 가 대표적
- 어플리케이션 계층에서 받은 메세지를 기반으로 세그먼트 또는 데이터그램으로 데이터를 쪼개고 데이터가 오류없이 순서대로 전달되도록 도움을 주는 층


### 인터넷 계층(network)

- IP, ICMP, ARP가 대표적
- 한 노드에서 다른 노드로 전송 계층에서 받은 세그먼트나 데이터그램을 패킷화하여 목적지로 전송


### 링크 계층(link)

- Network Access 계층이라고 부르기도 함
- 전선, 광섬유, 무선 등으로 데이터가 물리적으로 전송되는 계층
- OSI 7계층의 데이터링크 계층 + 물리 계층


## 캡슐화와 비캡슐화

- 캡슐화(encapsulation)란 데이터를 보낼 때 각 계층을 지나며 헤더들이 붙여지는 과정을 뜻함
	- 전송 계층에서는 TCP 헤더, 네트워크 계층은 IP 주소 해더를 추가하는 등
- 비캡슐화(decapsulation)란 캡슐화의 역과정
	- 수신측에서 각 헤더를 제거하면서 데이터를 취하는 것


## PDU

- Protocol Data Unit
- 각 계층의 데이터 단위를 뜻함
	- 어플리케이션 계층 : 메세지
	- 전송 계층 : 세그먼트(TCP), 데이터그램(UDP)
		- 세그먼트, 데이터그램 : 적절한 크기로 쪼갠 조각
	- 인터넷 계층 : 패킷
		- 세그먼트에 SP(송신자의 32비트 IP주소)와 DP(수신자의 32비트 IP주소)가 포함된 IP 헤더가 붙은 형태의 조각
	- 링크 계층 : 프레임(데이터 링크 계층), 비트(물리 계층)
		- 프레임 : MAC 주소 헤더와 CRC/체크섬 트레일러가 붙은 조각
			- CRC/체크섬 트레일러 : 데이터의 오류감지를 위한 수학적 함수가 적용된 값들이 있는 필드
			- 링크의 오류로 인한 데이터 손상을 감지하는 역할
			- 두 가지의 과정을 기반으로 데이터 전송오류 방지 및 데이터 무결성 유지
				- CRC : CRC-1, CRC-16 등의 알고리즘으로 나온 값을 통해 전송 오류 감지
				- 체크섬 : MD5, SHA-256 등의 알고리즘으로 나온 값을 통해 데이터 무결성 방지

- 통상 모든 계층에서 "패킷"으로 부르는 경우가 많으나, 각 계층별 PDU에 따라 부르는 것이 더 적절함


## OSI 7계층

- TCP/IP 계층의 어플리케이션 계층을 3계층 (Application, Presentation, Session)으로 나눔
- 링크 계층(Network Access Layer)을 2계층 (Data-Link, Physical)으로 나눔
- 인터넷 계층을 네트워크 계층이라고 부름








